(function(r,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","element-plus"],o):o((r=typeof globalThis<"u"?globalThis:r||self).MaTable={},r.Vue,r.ElementPlus)})(this,function(r,o,g){"use strict";const V=o.defineComponent({name:"MaTable",props:{options:{type:Object,default:()=>({})},columns:{type:Array,default:()=>[]}},directives:{Loading:g.ElLoadingDirective},emits:["set-data-callback"],setup(u,{slots:t,attrs:d,emit:m,expose:w}){const l=o.ref(u.options),c=o.ref(u.columns),z=o.inject("MaTableOptions"),y=o.ref(!1),L=o.ref(),b=()=>{const{adaptionOffsetBottom:e}=l.value,a=window.innerHeight-(e??70);l.value.height=`${a}px`},O=o.ref(1);o.onMounted(async()=>{y.value=!0}),o.watch(()=>{var e;return(e=l.value)==null?void 0:e.adaption},e=>{e&&(window.addEventListener("resize",b),b())},{immediate:!0}),o.watch(()=>{var e;return(e=l.value)==null?void 0:e.adaptionOffsetBottom},()=>{var e;(e=l.value)!=null&&e.adaption&&b()},{immediate:!0}),o.onBeforeUnmount(()=>{y.value=!1,window.removeEventListener("resize",b)});const D=()=>{var a,n;const{pagination:e}=l.value;return o.withDirectives(o.createVNode("div",{className:"base.pagination"},[o.createVNode("div",{class:"base.pagination-left"},[(a=t==null?void 0:t.pageLeft)==null?void 0:a.call(t)]),(((n=l.value)==null?void 0:n.showPagination)??!1)&&e&&o.createVNode("div",{class:"base.el-page"},[o.createVNode(g.ElPagination,o.mergeProps({total:0,onChange:()=>{}},e,{currentPage:O.value,"onUpdate:currentPage":i=>O.value=i,size:(e==null?void 0:e.size)??"default",pagerCount:(e==null?void 0:e.pagerCount)??5,layout:(e==null?void 0:e.layout)??"total, prev, pager, next, sizes, jumper"}),null)])]),[[o.vShow,t.pageLeft||e]])},N=(e,a)=>{var M,E,A,B;if(e!=null&&e.hide&&(e==null?void 0:e.hide)instanceof Function&&e.hide(d)||e!=null&&e.hide&&typeof(e==null?void 0:e.hide)=="boolean"&&e.hide)return;const n=typeof e.prop=="function"?e.prop(a):e.prop;let i={default:s=>{var p,f,h;return((p=e==null?void 0:e.cellRender)==null?void 0:p.call(e,Object.assign(s,{options:l.value,attrs:d})))??((f=t==null?void 0:t[`column-${n}`])==null?void 0:f.call(t,s))??((h=t==null?void 0:t.default)==null?void 0:h.call(t,s))},header:s=>{var p,f,h;return((p=e==null?void 0:e.headerRender)==null?void 0:p.call(e,Object.assign(s,{options:l.value,attrs:d})))??((f=t==null?void 0:t[`header-${n}`])==null?void 0:f.call(t,s))??((h=t==null?void 0:t.header)==null?void 0:h.call(t,s))},filterIcon:s=>{var p;return(p=t==null?void 0:t.filterIcon)==null?void 0:p.call(t,s)}};const{label:C,prop:k,children:v,cellRender:H,headerRender:F,...S}=e;return v&&v.length>0&&(i.default=()=>v==null?void 0:v.map(N)),o.createVNode(g.ElTableColumn,o.mergeProps({key:a},S,{label:typeof C=="function"?C():C,prop:n,align:(e==null?void 0:e.align)??((M=l.value)==null?void 0:M.columnAlign)??"center",headerAlign:(e==null?void 0:e.align)??((E=l.value)==null?void 0:E.columnAlign)??(e==null?void 0:e.headerAlign)??((A=l.value)==null?void 0:A.headerAlign)??"center",showOverflowTooltip:(e==null?void 0:e.showOverflowTooltip)??((B=l.value)==null?void 0:B.showOverflowTooltip)??!0}),typeof(T=i)=="function"||Object.prototype.toString.call(T)==="[object Object]"&&!o.isVNode(T)?i:{default:()=>[i]});var T},R=()=>{const{on:e,pagination:a,...n}=l.value;return o.createVNode(o.Fragment,null,[o.createVNode(g.ElTable,o.mergeProps({ref:L},e,n,d),{default:()=>{var i;return[o.createVNode(o.Fragment,null,[(i=c.value)==null?void 0:i.map(N)])]},append:()=>{var i;return(i=t.append)==null?void 0:i.call(t)},empty:()=>{var i;return((i=t.empty)==null?void 0:i.call(t))??o.createVNode(g.ElEmpty,null,null)}}),D()])},P=()=>{const{loading:e,loadingConfig:a,height:n,maxHeight:i}=l.value;return o.withDirectives(o.createVNode("div",{className:"base.table","element-loading-svg":(a==null?void 0:a.svg)??'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 1024 1024"><path fill="currentColor" d="M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"/></svg>',"element-loading-svg-view-box":(a==null?void 0:a.viewBox)??"-9, -9, 50, 50","element-loading-text":(a==null?void 0:a.text)??null,"element-loading-spinner":(a==null?void 0:a.spinner)??null,"element-loading-background":(a==null?void 0:a.spinner)??null,"element-loading-custom-class":(a==null?void 0:a.customClass)??null},[R()]),[[o.resolveDirective("loading"),e]])},j=e=>c.value=e;return w({setData:e=>{l.value.data=e,m("set-data-callback",e)},setPagination:e=>{var a;return l.value.pagination=Object.assign(((a=l.value)==null?void 0:a.pagination)??{},e)},setCurrentPage:e=>O.value=e,setLoadingState:e=>l.value.loading=e,setOptions:e=>l.value=Object.assign(l.value,e),getOptions:()=>l.value,setColumns:j,getColumns:()=>c.value,appendColumn:e=>c.value.push(e),removeColumn:e=>j(c.value.filter((a,n)=>(typeof a.prop=="function"?a.prop(n):a.prop)!==e)),getColumnByProp:e=>{var a;return((a=c.value.filter((n,i)=>(typeof n.prop=="function"?n.prop(i):n.prop)===e))==null?void 0:a[0])??null},getElTableRef:()=>L.value}),()=>z.ssr?y.value&&P():P()}}),x={install(u,t){u.component(V.name,V),u.provide("MaTableOptions",t??{ssr:!1})}};r.MaTable=x,r.default=x,r.useTable=function(u){return new Promise(async(t,d)=>{const m=o.getCurrentInstance();o.onMounted(async()=>{if(m&&m.refs[u]){const w=m.refs[u];t({...w})}else d("[@base.table]: not found ref for ma-table component")})})},Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
